{% extends "base.html" %}

{% block content %}
    <h1>Dashboard</h1>

    <h2>Usuários</h2>
    <ul>
        <li>Total: {{ total_usuarios }}</li>
        <li>Funcionários: {{ total_funcionarios }}</li>
        <li>Gerentes: {{ total_gerentes }}</li>
        <li>Administradores: {{ total_admins }}</li>
    </ul>

    <h2>Recursos</h2>
    <p>Total de recursos cadastrados: {{ total_recursos }}</p>

    <canvas id="graficoRecursos" width="400" height="200"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const ctx = document.getElementById('graficoRecursos');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: {{ tipos|safe }},
                datasets: [{
                    label: 'Quantidade de Recursos por Tipo',
                    data: {{ quantidades|safe }},
                    backgroundColor: 'rgba(54, 162, 235, 0.5)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: { beginAtZero: true }
        }
      }
    });
  </script>    
{% endblock %}
